#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

// Read the project LICENSE file
const projectLicense = fs.readFileSync(path.join(__dirname, '../LICENSE'), 'utf8');

// Read the generated third-party licenses
const thirdPartyLicenses = fs.readFileSync(path.join(__dirname, '../dist/third-party-licenses.txt'), 'utf8');

// Create the license content module
const licenseModule = `// This file is auto-generated by scripts/generate-licenses.js
// Do not edit manually - it will be overwritten during build

export const PROJECT_LICENSE = ${JSON.stringify(projectLicense)};

export const THIRD_PARTY_LICENSES = ${JSON.stringify(thirdPartyLicenses)};

export const ALL_LICENSES = PROJECT_LICENSE + '\\n\\n' + 
  '='.repeat(80) + '\\n' + 
  'THIRD-PARTY LICENSES\\n' + 
  '='.repeat(80) + '\\n\\n' + 
  THIRD_PARTY_LICENSES;
`;

// Write the license module
fs.writeFileSync(path.join(__dirname, '../src/data/licenses.ts'), licenseModule);

console.log('âœ… License content module generated successfully!');